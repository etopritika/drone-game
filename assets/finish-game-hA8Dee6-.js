import{j as e,d as x,b as v,r as i}from"./index-CVgWJOZL.js";import{B as m}from"./button-Csr1Gdtk.js";import{C as u,a as f,b as h,d as j,e as b}from"./card-C29yCANN.js";import{u as d,a as p}from"./cave-store-BBhutaNG.js";const w=({topPlayer:s})=>s?e.jsxs(u,{className:"max-w-[300px] w-full",children:[e.jsx(f,{children:e.jsx(h,{children:"Top Score"})}),e.jsxs(j,{className:"w-full",children:[e.jsxs("p",{className:"text-xl mb-2",children:[e.jsx("strong",{children:"Complexity:"})," ",s.complexity]}),e.jsxs("p",{className:"text-xl",children:[e.jsx("strong",{children:"Score:"})," ",s.topScore]})]})]}):null,y=()=>{const s=localStorage.getItem("players");return s?JSON.parse(s):[]},T=(s,l,r)=>{const t=y(),c=t.findIndex(n=>n.name===s);if(c!==-1){const n=t[c].topScore;r>n&&(t[c].topScore=r,t[c].complexity=l)}else t.push({name:s,topScore:r,complexity:l});localStorage.setItem("players",JSON.stringify(t))},E=s=>y().find(r=>r.name===s)||null,I=()=>{const s=x(a=>a.name),l=x(a=>a.complexity),r=d(a=>a.score),t=d(a=>a.setGameOver),c=p(a=>a.clearSegments),n=p(a=>a.clearCave),o=v(),[S,g]=i.useState(null);i.useEffect(()=>{s&&(T(s,l,r),g(E(s)))},[s,l,r]);const C=i.useCallback(()=>{t(!1),o("/game")},[o,t]),N=i.useCallback(()=>{t(!1),c(),n(),o("/start-game")},[o,t,c,n]);return e.jsxs("div",{className:"flex flex-col gap-12",children:[e.jsx(w,{topPlayer:S}),e.jsxs(u,{className:"min-w-[300px]",children:[e.jsx(f,{children:e.jsx(h,{children:"Game Over!"})}),e.jsxs(j,{className:"w-full",children:[e.jsxs("p",{className:"text-xl mb-2",children:[e.jsx("strong",{children:"Complexity:"})," ",l]}),e.jsxs("p",{className:"text-xl mb-4",children:[e.jsx("strong",{children:"Your score:"})," ",r]})]}),e.jsxs(b,{className:"flex justify-between space-x-4 mt-6",children:[e.jsx(m,{variant:"default",onClick:C,children:"Retry"}),e.jsx(m,{variant:"destructive",onClick:N,children:"Exit"})]})]})]})};export{I as default};
